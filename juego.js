        // Preguntas y respuestas
        const questions = [
            {
                question: "¿Cuál fue una causa económica clave que propició la independencia de México?",

                options: ["La creación de una industria textil autónoma", "El monopolio industrial que prohibía producir ciertos artículos ", "La libertad de comercio entre España y las colonias.", " La reducción de impuestos sobre la producción local."],
                correct: 1,
                explanation: "El monopolio industrial impedía la producción de ciertos artículos en la Nueva España, como la seda, para favorecer las manufacturas españolas. Esto limitaba el desarrollo económico de la colonia y generó descontento entre los criollos."
            },
            {
                question: "¿Qué tipo de causa es el descontento social debido a la discriminación racial hacia indígenas, negros y mestizos?",
                options: ["Económica", "Política", "Social", "Externa"],
                correct: 2,
                explanation: "La discriminación racial y la explotación de grupos indígenas, negros y mestizos reflejan las desigualdades sociales presentes en la Nueva España, lo que incentivó el apoyo a la independencia."
            },
            {
                question: "¿Dónde se dio el Grito de Independencia?",
                options: ["Ciudad de México", "Guanajuato", "Dolores", "Querétaro"],
                correct: 2,
                explanation: "El Grito de Independencia se dio en el pueblo de Dolores (hoy Dolores Hidalgo), Guanajuato."
            },
            {
                question: "¿Qué evento externo influyó directamente en el inicio del movimiento de independencia en 1810?",
                options: ["La Revolución Industrial", "La invasión napoleónica a España en 1808", "La independencia de Estados Unidos", "La abolición de la esclavitud en Europa"],
                correct: 1,
                explanation: "La invasión napoleónica debilitó a la monarquía española, lo que permitió a las colonias como la Nueva España cuestionar su lealtad al gobierno peninsular y organizar movimientos independentistas."
            },
            {
                question: "¿Qué tipo de causa se clasifica como interna en el contexto de la independencia de México?",
                options: ["La influencia de la Ilustración", "El distanciamiento social entre criollos y peninsulares", "La independencia de las Trece Colonias de América", "La Revolución Francesa"],
                correct: 1,
                explanation: " Las causas internas se originan dentro de la propia colonia. En este caso, las tensiones sociales entre criollos y peninsulares fomentaron el descontento local y las ideas de independencia."
            },
            {
                question: "¿Cuál fue una de las restricciones políticas que impulsaron el movimiento de independencia?",
                options: ["La abolición de los monopolios comerciales", "La centralización y rigidez burocrática", "La falta de representación americana en el gobierno español", "La reducción de los privilegios criollos"],
                correct: 2,
                explanation: " La Nueva España no tenía representación adecuada en el gobierno español, lo que generaba un sentimiento de exclusión política entre los criollos y otras élites locales, alimentando el deseo de autonomía."
            },
            
            {
                question: "¿Cómo se dividen las causas de la Independencia de México según su ámbito, origen e impacto?",
                options: ["Según su impacto, se dividen en económicas y políticas", "Según su ámbito, se dividen en internas y externas.","Según su origen, se dividen en directas e indirectas.","Según su ámbito, se dividen en económicas, políticas, sociales y culturales." ],
                correct: 3,
                explanation: "La clasificación permite analizar cómo cada aspecto de la sociedad, desde la economía hasta la cultura, influyó en el descontento general. Aunque las causas actuaron de forma concatenada, dividirlas facilita un análisis más detallado."
            },{
                question: "¿Qué relación tienen las Reformas Borbónicas y las ideas de la Ilustración con el descontento social en la Nueva España?",
                options: ["Ambas limitaron el comercio interno, lo que perjudicó a los criollos.", "Las Reformas Borbónicas incrementaron impuestos, mientras que las ideas de la Ilustración alentaron principios de libertad e igualdad.", "Las ideas de la Ilustración justificaron la fidelidad al rey Fernando VII.", "Las Reformas Borbónicas impulsaron medidas liberales favorables para los criollos"],
                correct: 1,
                explanation: " Este aumento de impuestos, decidido por la corona española, afectó directamente la economía de los habitantes de la Nueva España, especialmente los criollos. Fue una causa económica interna que generó descontento entre los grupos sociales."
            },
            {
                question: "¿Por qué la invasión napoleónica a España en 1808 se considera un evento clave para el inicio del movimiento independentista en América?",
                options: ["Porque demostró la incapacidad de España para mantener el control en sus colonias. ", "Porque fomentó un gobierno estable bajo José Bonaparte.", "Porque consolidó la autoridad de Fernando VII en América.", "Porque fortaleció los vínculos entre criollos y peninsulares."],
                correct: 0,
                explanation: " Las causas internas se originan dentro de la propia colonia. En este caso, las tensiones sociales entre criollos y peninsulares fomentaron el descontento local y las ideas de independencia."
            },{
                question: "¿Qué efectos tuvo el Bloqueo Continental decretado por Napoleón en la relación entre Francia, España y Portugal?",

                options: ["Aumentó el prestigio de Carlos IV como gobernante español.", "Facilitó el comercio entre Inglaterra y España.", "Forzó la invasión de Portugal y provocó la ocupación francesa en España. ","Promovió una alianza militar entre Francia y Portugal." ],
                correct: 2,
                explanation: " Las ideas de libertad, igualdad y soberanía popular provenientes de la Ilustración influenciaron a los criollos, quienes las usaron como base ideológica para cuestionar la opresión colonial y demandar independencia."
            },{
                question: "¿Qué impacto tuvo la ocupación francesa de España y la destitución de Fernando VII en las colonias americanas?",

                options: ["Generó estabilidad política en los territorios americanos.", "Motivó el inicio de los movimientos de independencia en América.", "Consolidó el poder de José Bonaparte como rey legítimo en América.","Frenó el avance de las ideas independentistas en las colonias." ],
                correct: 1,
                explanation: " La caída de Fernando VII y la crisis política en España hicieron que los criollos vieran la oportunidad de buscar un cambio en la relación colonial, considerando alternativas como la autonomía o la independencia total. "
            },{
                question: "¿Por qué no existió un proyecto unificado durante el proceso de Independencia?",

                options: ["Porque las autoridades virreinales prohibieron reuniones para planificar el movimiento.", "Porque los intereses de los diferentes grupos eran diversos y la coyuntura en España se desarrolló rápidamente. ", "Porque no había líderes suficientes para guiar la lucha. ","Porque los criollos nunca lograron formar una alianza con los peninsulares." ],
                correct: 1,
                explanation: "  Los criollos, peninsulares, indígenas y mestizos tenían intereses distintos. Esta disparidad, junto con los rápidos cambios en la metrópoli, dificultó la creación de un plan cohesionado desde el inicio del movimiento."
            },{
                question: "¿Cuál fue el resultado de la revuelta organizada por la Audiencia en 1808?",

                options: ["Se consolidó un gobierno autónomo liderado por criollos.", "José de Iturrigaray fue sustituido como virrey, y el proyecto autonomista fue sofocado.", "La conspiración de Valladolid se inició inmediatamente después.","Se formó un ejército de criollos para enfrentar a los peninsulares." ],
                correct: 1,
                explanation: " La Audiencia, dominada por peninsulares, temía perder poder frente a los criollos. Por ello, actuaron contra Iturrigaray, quien simpatizaba con un proyecto autonomista, logrando su destitución y restableciendo el control peninsular."
                
            },{
                question: "¿Qué decisión de Hidalgo tras la victoria en el Monte de las Cruces provocó el descontento entre los jefes insurgentes?",

                options: ["Abolir la esclavitud en toda la Nueva España.", "Regresar a Querétaro en lugar de tomar la Ciudad de México.", "Reemplazar a Allende como comandante del ejército. ","Atacar Toluca sin preparación suficiente." ],
                correct: 1,
                explanation: "  Hidalgo sabía que su ejército, formado en su mayoría por campesinos y soldados improvisados, podría cometer saqueos y desmanes en la capital, como ya había ocurrido en otras ciudades. Este temor lo llevó a retroceder, aunque generó descontento entre los líderes insurgentes."
            },{
                question: "¿Qué acción destacó a José María Morelos como líder principal del movimiento tras la muerte de Hidalgo?",

                options: ["Formar un gobierno insurgente en Guadalajara.", "Organizar campañas militares efectivas y reclamar el puerto de Acapulco.", "Declarar la independencia absoluta de la Nueva España. ","Viajar a Estados Unidos para adquirir armas y recursos." ],
                correct: 1,
                explanation: "Morelos llevó a cabo una exitosa campaña militar en el sur, logrando el control de territorios estratégicos como Acapulco. Además, impulsó un proyecto político que organizó mejor el movimiento insurgente, lo que lo convirtió en el principal líder tras la muerte de Hidalgo."
            },{
                question: " ¿Cuál fue la principal causa cultural que favoreció el proceso de independencia de México en 1810?",

                options: ["La llegada de la Revolución Industrial.", "El sentimiento de identidad nacional en la Nueva España.", "La invasión de Napoleón a México.","a prohibición del comercio con otras naciones." ],
                correct: 1,
                explanation: "Durante el periodo colonial, surgió un creciente sentido de identidad entre los criollos (descendientes de europeos nacidos en América), quienes se sentían relegados por las políticas discriminatorias de la metrópoli."
            },{
                question: " ¿Qué papel jugaron las ideas liberales europeas en el proceso de independencia de México?",

                options: ["rearon un sentido de obediencia hacia la corona española.", "Fueron rechazadas por la mayoría de los criollos.", "Inspiraron a los criollos a luchar por sus derechos y autonomía.","Provocaron un aumento en los impuestos." ],
                correct: 2,
                explanation: "Las ideas de libertad, igualdad y soberanía popular provenientes de movimientos como la Ilustración y la Revolución Francesa influyeron profundamente en los criollos y otros grupos en la Nueva España. Estas corrientes ideológicas impulsaron a los líderes independentistas a cuestionar la legitimidad de la monarquía española y a demandar derechos y autonomía."
            },{
                question: " ¿Cuál fue la principal causa cultural que favoreció el proceso de independencia de México en 1810?",

                options: ["La llegada de la Revolución Industrial.", "El sentimiento de identidad nacional en la Nueva España.", "La invasión de Napoleón a México.","a prohibición del comercio con otras naciones." ],
                correct: 1,
                explanation: "Durante el periodo colonial, surgió un creciente sentido de identidad entre los criollos (descendientes de europeos nacidos en América), quienes se sentían relegados por las políticas discriminatorias de la metrópoli."
            },,{
                question: " ¿Qué evento internacional contribuyó a generar un cambio en la relación entre la metrópoli española y sus colonias americanas?",

                options: ["La guerra de independencia de Estados Unidos.", "La Revolución Industrial.", " La invasión napoleónica a España en 1808.","La llegada de Cristóbal Colón a América." ],
                correct: 2,
                explanation: "Cuando Napoleón Bonaparte invadió España y colocó a su hermano José Bonaparte como rey, se produjo un vacío de poder en la península ibérica. Esto debilitó la autoridad española y dio lugar a movimientos en América que aprovecharon esta crisis para cuestionar su dependencia de la metrópoli."
            },{
                question: " ¿Cuál fue el impacto de la caída de los monarcas españoles en los territorios españoles en América?",

                options: [" Los territorios americanos apoyaron incondicionalmente a José Bonaparte.", " Se produjo un sentimiento de lealtad hacia la corona francesa.", "Se generó un sentimiento de rebelión y cuestionamiento de la autoridad española.","Hubo un fortalecimiento del control español en las colonias." ],
                correct: 2,
                explanation: "La abdicación de los reyes españoles y el ascenso de un gobernante extranjero provocaron un sentimiento de incertidumbre en las colonias americanas. Ante esta situación, los criollos comenzaron a organizarse y a rebelarse, argumentando que, sin un monarca legítimo, podían autogobernarse."
            },{
                question: " ¿Cuál fue el impacto de la caída de los monarcas españoles en los territorios españoles en América?",

                options: [" Porque todos estaban de acuerdo en seguir a Fernando VII.", " Porque había una única estrategia clara y acordada por todos.", "Porque los intereses eran diversos y no había un eje unificado.","Porque se esperaba que la independencia fuera liderada por la corona española." ],
                correct: 2,
                explanation: "Los movimientos de independencia no fueron homogéneos porque en la Nueva España coexistían intereses diversos entre criollos, indígenas, mestizos y otras clases sociales. No había una agenda única ni consenso sobre cómo debía estructurarse el proceso de independencia, lo que resultó en estrategias dispersas y conflictos internos."
            },






            // Agrega más preguntas aquí
        ];

        let currentQuestions = [];
        let currentQuestion = 0;
        let lives = 4;
        let score = 0;
        let consecutiveCorrect = 0;
        let timeLeft = 300; // 5 minutos en segundos
        let questionTimer = 15;
        let gameTimer;
        let questionInterval;
        let wrongAnswers = [];

        function shuffleQuestions() {
            currentQuestions = [...questions].sort(() => Math.random() - 0.5);
        }

        function startGame() {
            const playerName = document.getElementById('player-name').value;
            if (!playerName) {
                alert('Por favor ingresa tu nombre');
                return;
            }

            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            shuffleQuestions();
            startTimers();
            showQuestion();
        }

        function startTimers() {
            gameTimer = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 60) {
                    document.getElementById('timer').classList.add('warning');
                }
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);

            startQuestionTimer();
        }

        function startQuestionTimer() {
            questionTimer = 15;
            updateQuestionTimer();
            if (questionInterval) clearInterval(questionInterval);
            questionInterval = setInterval(() => {
                questionTimer--;
                updateQuestionTimer();
                if (questionTimer <= 0) {
                    handleAnswer(-1);
                }
            }, 1000);
        }

        function updateQuestionTimer() {
            const timerElement = document.getElementById('question-time');
            timerElement.textContent = questionTimer;
            if (questionTimer <= 5) {
                timerElement.classList.add('warning');
            } else {
                timerElement.classList.remove('warning');
            }
        }

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function showQuestion() {
            if (currentQuestion >= currentQuestions.length) {
                endGame();
                return;
            }

            const question = currentQuestions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.onclick = () => handleAnswer(index);
                optionsContainer.appendChild(button);
            });

            startQuestionTimer();
        }

        function handleAnswer(selectedIndex) {
            clearInterval(questionInterval);
            const question = currentQuestions[currentQuestion];
            
            if (selectedIndex === question.correct) {
                score += 100;
                consecutiveCorrect++;
                if (consecutiveCorrect === 5) {
                    lives++;
                    consecutiveCorrect = 0;
                    window.alert('¡Ganaste una vida extra! 🥳');
                }
            } else {
                lives -= 0.5;
                consecutiveCorrect = 0;
                window.alert('¡Perdiste media vida 🥺')
                wrongAnswers.push({
                    question: question.question,
                    correctAnswer: question.options[question.correct],
                    explanation: question.explanation
                });
            }

            document.getElementById('lives').textContent = lives;
            document.getElementById('score').textContent = score;

            if (lives <= 0) {
                endGame();
                return window.alert ("Perdiste, vuelve a intentarlo 🥺 ")
            }

            currentQuestion++;
            showQuestion();
        }

        function endGame() {
            clearInterval(gameTimer);
            clearInterval(questionInterval);

            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';


            const timeSpent = 300 - timeLeft;
            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;

            document.getElementById('final-stats').innerHTML = `
                <h3>Estadísticas finales:</h3>
                <p>Puntuación final: ${score}</p>
                <p>Tiempo usado: ${minutes}:${seconds.toString().padStart(2, '0')}</p>
                <p>Preguntas correctas: ${score/100} de ${currentQuestion}</p>
            `;
     const wrongAnswersContainer = document.getElementById('wrong-answers');
            if (wrongAnswers.length > 0) {
                wrongAnswersContainer.innerHTML = '<h3>Respuestas incorrectas:</h3>';
                wrongAnswers.forEach(wrong => {
                    wrongAnswersContainer.innerHTML += `
                        <div class="wrong-answer">
                            <p><strong>Pregunta:</strong> ${wrong.question}</p>
                            <p><strong>Respuesta correcta:</strong> ${wrong.correctAnswer}</p>
                            <p><strong>Explicación:</strong> ${wrong.explanation}</p>
                        </div>
                    `;
                });
            }
        }

        function restartGame() {
            lives = 4;
            score = 0;
            currentQuestion = 0;
            consecutiveCorrect = 0;
            timeLeft = 300;
            wrongAnswers = [];
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('welcome-screen').style.display = 'block';
            document.getElementById('timer').classList.remove('warning');
        }
